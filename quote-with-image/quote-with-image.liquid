<div
  class="quote-image-section"
  style="
    --quote-section-color: {{ section.settings.color }};
    --quote-section-accent: {{ section.settings.accent }};
    --quote-section-bg: {{ section.settings.bg }};
    padding-top: {{ section.settings.padding_top }}rem;
    padding-bottom: {{ section.settings.padding_bottom }}rem;
  "
>
  <div class="quote-image-section__container">
    <div class="quote-image-section__card">
      <div class="quote-image-section__grid {% if section.settings.image_position == 'left' %}quote-image-section__grid--reverse{% endif %}">
        <div class="quote-image-section__content">
          {% if section.settings.eyebrow != blank %}
            <div class="quote-image-section__eyebrow">{{ section.settings.eyebrow }}</div>
          {% endif %}

          {% if section.settings.heading != blank %}
            <h2 class="quote-image-section__heading">{{ section.settings.heading }}</h2>
          {% endif %}

          {% if section.settings.body != blank %}
            <div class="quote-image-section__body rte">{{ section.settings.body }}</div>
          {% endif %}

          {% if section.settings.signature != blank %}
            <div class="quote-image-section__signature">
              {{
                section.settings.signature
                | image_url: width: 400
                | image_tag: loading: 'lazy', class: 'quote-image-section__signature-img', alt: section.settings.signature_alt
              }}
            </div>
          {% endif %}

          {% if section.settings.show_quotes %}
            <div class="quote-image-section__quotes" aria-hidden="true">
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 298.667 298.667" xml:space="preserve">
                <g>
                  <polygon points="0,170.667 64,170.667 21.333,256 85.333,256 128,170.667 128,42.667 0,42.667"/>
                  <polygon points="170.667,42.667 170.667,170.667 234.667,170.667 192,256 256,256 298.667,170.667 298.667,42.667"/>
                </g>
              </svg>
            </div>
          {% endif %}
        </div>

        <div class="quote-image-section__media">
          {% if section.settings.image != blank %}
            {{
              section.settings.image
              | image_url: width: 1200
              | image_tag:
                loading: 'lazy',
                sizes: '(min-width: 1200px) 50vw, 100vw',
                class: 'quote-image-section__img',
                alt: section.settings.image_alt
            }}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

{% style %}
  .quote-image-section {
    color: var(--quote-section-color, #ffffff);
    width: 100%;
  }

  .quote-image-section__container {
    max-width: var(--page-width, 1320px);
    margin: 0 auto;
    padding: 0 var(--gutter-md, 20px);
  }

  .quote-image-section__card {
    background: var(--quote-section-bg, #1a1a1a);
    border: 1px solid rgba(var(--border-color, 255, 255, 255), 0.1);
    border-radius: 0;
    overflow: hidden;
  }

  .quote-image-section__grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    align-items: stretch;
  }

  .quote-image-section__grid--reverse {
    direction: rtl;
  }

  .quote-image-section__grid--reverse > * {
    direction: ltr;
  }

  .quote-image-section__content {
    position: relative;
    padding: 3.5rem 4.6rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .quote-image-section__eyebrow {
    color: var(--quote-section-accent, #B1006E);
    font-weight: 600;
    margin-bottom: 0.25rem;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .quote-image-section__heading {
    margin: 0 0 0.75rem 0;
    font-size: clamp(1.25rem, 2.2vw, 2rem);
    font-weight: 800;
    line-height: 1.2;
    color: inherit;
  }

  .quote-image-section__body {
    opacity: 0.95;
    line-height: 1.6;
    color: inherit;
  }

  .quote-image-section__body p {
    margin: 0 0 1rem 0;
  }

  .quote-image-section__body p:last-child {
    margin-bottom: 0;
  }

  .quote-image-section__signature {
    margin-top: 1.25rem;
  }

  .quote-image-section__signature-img {
    max-width: 100px;
    height: auto;
    display: block;
  }

  .quote-image-section__quotes {
    position: absolute;
    left: 2rem;
    top: 10rem;
    width: 12rem;
    height: 12rem;
    opacity: 0.15;
    z-index: 0;
    pointer-events: none;
  }

  .quote-image-section__quotes svg {
    width: 100%;
    height: 100%;
    fill: currentColor;
    color: inherit;
  }

  .quote-image-section__content > * {
    position: relative;
    z-index: 1;
  }

  .quote-image-section__media {
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.05);
  }

  .quote-image-section__img {
    width: 100%;
    height: 100%;
    display: block;
    object-fit: cover;
  }

  @media (max-width: 990px) {
    .quote-image-section__grid {
      grid-template-columns: 1fr;
    }

    .quote-image-section__grid--reverse {
      direction: ltr;
    }

    .quote-image-section__content {
      padding: 1.25rem 1rem;
    }

    .quote-image-section__quotes {
      display: none;
    }

    .quote-image-section__eyebrow {
      margin-bottom: 1.25rem;
    }

    .quote-image-section__signature-img {
      width: 40%;
      margin-inline: auto;
    }

    .quote-image-section__media {
      min-height: 300px;
    }
  }

  @media (max-width: 749px) {
    .quote-image-section__container {
      padding: 0 var(--gutter-sm, 15px);
    }
  }
{% endstyle %}

{% schema %}
{
  "name": "Quote with Image",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow Text",
      "default": "Subtitle"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Quote Title"
    },
    {
      "type": "richtext",
      "id": "body",
      "label": "Quote Text",
      "default": "<p>Add your quote text here</p>"
    },
    {
      "type": "image_picker",
      "id": "signature",
      "label": "Signature Image"
    },
    {
      "type": "text",
      "id": "signature_alt",
      "label": "Signature Alt Text",
      "default": "Signature"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "image_alt",
      "label": "Image Alt Text",
      "default": "Image"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "default": "right",
      "options": [
        {
          "value": "right",
          "label": "Right"
        },
        {
          "value": "left",
          "label": "Left"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "show_quotes",
      "label": "Show Quote Icon",
      "default": true
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "bg",
      "label": "Background Color",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "color",
      "label": "Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "accent",
      "label": "Accent Color",
      "default": "#B1006E"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "min": 0,
      "max": 10,
      "step": 0.5,
      "default": 2,
      "unit": "rem"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "min": 0,
      "max": 10,
      "step": 0.5,
      "default": 2,
      "unit": "rem"
    }
  ],
  "presets": [
    {
      "name": "Quote with Image (Modular)",
      "category": "Custom"
    }
  ]
}
{% endschema %}
